# Adaptive RSI Pro / è‡ªé€‚åº”RSIä¸“ä¸šç‰ˆ

[![TradingView](https://img.shields.io/badge/TradingView-Indicator-blue?logo=tradingview)](https://www.tradingview.com/scripts/)
[![Pine Script](https://img.shields.io/badge/Pine%20Script-v6-brightgreen)](https://www.tradingview.com/pine-script-reference/v6/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**Pine Script v6** | **v7.1**

åŠ¨æ€è¶…ä¹°è¶…å–é˜ˆå€¼ + å¤šå‘¨æœŸåˆ†æ + èƒŒç¦»æ£€æµ‹ + ä¿¡å·ç»Ÿè®¡

Dynamic overbought/oversold thresholds + Multi-timeframe analysis + Divergence detection + Signal statistics

---

## æ ¸å¿ƒç†å¿µ / Core Concept

ä¼ ç»ŸRSIä½¿ç”¨å›ºå®šçš„30/70é˜ˆå€¼ï¼Œä½†ä¸åŒèµ„äº§æ³¢åŠ¨ç‰¹æ€§ä¸åŒã€‚æœ¬æŒ‡æ ‡ä½¿ç”¨**Z-Scoreç»Ÿè®¡æ–¹æ³•**åŠ¨æ€è®¡ç®—é˜ˆå€¼ï¼Œè‡ªé€‚åº”æ¯ä¸ªèµ„äº§çš„å†å²åˆ†å¸ƒã€‚

Traditional RSI uses fixed 30/70 thresholds, but different assets have different volatility. This indicator uses **Z-Score statistics** to dynamically calculate thresholds, adapting to each asset's historical distribution.

| Z-Score | ç™¾åˆ†ä½ Percentile | å«ä¹‰ Meaning |
|---------|------------------|--------------|
| Â±2Ïƒ | P2 / P98 | æç«¯åŒºåŸŸ Extreme Zone |
| Â±1.5Ïƒ | P7 / P93 | æ˜¾è‘—åç¦» Notable Deviation |

---

## ä¿¡å·å›¾ä¾‹ / Signal Legend

### ä¹°å…¥ä¿¡å· Buy Signals (åº•éƒ¨æ˜¾ç¤º)

| å›¾æ ‡ | åç§° | æ¡ä»¶ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸŒŸ | MTFå…±æŒ¯ | å¤šå‘¨æœŸåŒæ—¶è¶…å– + Z<âˆ’2Ïƒ | â˜…â˜…â˜…â˜…â˜… |
| ğŸ’ | èƒŒç¦»+æç«¯ | çœ‹æ¶¨èƒŒç¦» + æç«¯è¶…å–åŒº | â˜…â˜…â˜…â˜…â˜† |
| ğŸ”¥ | æç«¯è¶…å– | Z-Score è·Œç ´ âˆ’2Ïƒ (â‰ˆP2) | â˜…â˜…â˜…â˜†â˜† |
| â¬†ï¸ | æ™®é€šè¶…å– | Z-Score è·Œç ´ âˆ’1.5Ïƒ (â‰ˆP7) | â˜…â˜…â˜†â˜†â˜† |
| â†—ï¸ | çœ‹æ¶¨èƒŒç¦» | ä»·æ ¼æ–°ä½ + RSIæœªæ–°ä½ | â˜…â˜†â˜†â˜†â˜† |

### å–å‡ºä¿¡å· Sell Signals (é¡¶éƒ¨æ˜¾ç¤º)

| å›¾æ ‡ | åç§° | æ¡ä»¶ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| ğŸŒŸ | MTFå…±æŒ¯ | å¤šå‘¨æœŸåŒæ—¶è¶…ä¹° + Z>+2Ïƒ | â˜…â˜…â˜…â˜…â˜… |
| ğŸ’ | èƒŒç¦»+æç«¯ | çœ‹è·ŒèƒŒç¦» + æç«¯è¶…ä¹°åŒº | â˜…â˜…â˜…â˜…â˜† |
| â„ï¸ | æç«¯è¶…ä¹° | Z-Score çªç ´ +2Ïƒ (â‰ˆP98) | â˜…â˜…â˜…â˜†â˜† |
| â¬‡ï¸ | æ™®é€šè¶…ä¹° | Z-Score çªç ´ +1.5Ïƒ (â‰ˆP93) | â˜…â˜…â˜†â˜†â˜† |
| â†˜ï¸ | çœ‹è·ŒèƒŒç¦» | ä»·æ ¼æ–°é«˜ + RSIæœªæ–°é«˜ | â˜…â˜†â˜†â˜†â˜† |

> **ä¼˜å…ˆçº§ç³»ç»Ÿ**: åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶æ—¶ï¼Œåªæ˜¾ç¤ºæœ€é«˜ä¼˜å…ˆçº§ä¿¡å·ï¼Œé¿å…å åŠ ã€‚
> 
> **Priority System**: When multiple conditions are met, only the highest priority signal is shown.

### çŠ¶æ€æŒ‡ç¤º Status Indicators

| å›¾æ ‡ | çŠ¶æ€ | Z-ScoreèŒƒå›´ |
|------|------|-------------|
| ğŸŸ¢ | æç«¯è¶…å– | Z < âˆ’2Ïƒ |
| ğŸŸ¡ | è¶…å– | âˆ’2Ïƒ â‰¤ Z < âˆ’NÏƒ* |
| âšª | ä¸­æ€§ | âˆ’NÏƒ â‰¤ Z â‰¤ +NÏƒ |
| ğŸŸ  | è¶…ä¹° | +NÏƒ < Z â‰¤ +2Ïƒ |
| ğŸ”´ | æç«¯è¶…ä¹° | Z > +2Ïƒ |

> *N = åŠ¨æ€æ™®é€šé˜ˆå€¼ (normal_threshold)ï¼Œæ ¹æ®æ³¢åŠ¨ç‡è‡ªåŠ¨è®¡ç®—ï¼Œé€šå¸¸åœ¨ 1.3Ïƒ ~ 1.7Ïƒ ä¹‹é—´

### è´¨é‡ç­‰çº§ Quality Grades

æ¯ä¸ªä¿¡å·é™„å¸¦è´¨é‡è¯„çº§ï¼ŒåŸºäºå¤šå› ç´ è¯„åˆ†ï¼š

| ç­‰çº§ | åˆ†æ•° | å»ºè®® |
|------|------|------|
| [A] | â‰¥80 | é«˜è´¨é‡ï¼Œå¯äº¤æ˜“ |
| [B] | 60-79 | è‰¯å¥½ï¼Œå¯äº¤æ˜“ |
| [C] | 40-59 | ä¸€èˆ¬ï¼Œè°¨æ…äº¤æ˜“ |
| [D] | <40 | ä½è´¨é‡ï¼Œå»ºè®®è§‚æœ› |

**è¯„åˆ†å› ç´ **: MTFå…±æŒ¯(+25) | èƒŒç¦»(+25) | RSIæ‹ç‚¹ç¡®è®¤(+10) | å‘¨çº¿è¶‹åŠ¿ä¸€è‡´(+15) | æˆäº¤é‡æ”¾å¤§(+10) | æç«¯æ·±åº¦(+10/+20) | ADXé€†åŠ¿æƒ©ç½š(-10)

---

## ä¸»è¦åŠŸèƒ½ / Key Features

### 1. è‡ªé€‚åº”é˜ˆå€¼ Adaptive Thresholds
- è‡ªåŠ¨è®¡ç®—å›çœ‹æœŸï¼ŒåŸºäºç»Ÿè®¡å…¬å¼ `n = (Z Ã— Ïƒ / E)Â²`
- æ ¹æ®èµ„äº§æ³¢åŠ¨ç‡è‡ªåŠ¨è°ƒæ•´èŒƒå›´
- ä¸‰çº§ç²¾åº¦å¯é€‰: High / Normal / Low

### 2. å¤šå‘¨æœŸåˆ†æ Multi-Timeframe (MTF)
- è‡ªåŠ¨é€‰æ‹©åˆ†å½¢å‘¨æœŸæˆ–æ‰‹åŠ¨è®¾ç½®3ä¸ªå‘¨æœŸ
- åŠ æƒå…±æŒ¯æ£€æµ‹ (æœ€é«˜å‘¨æœŸæƒé‡Ã—2)
- å…±æŒ¯ä¿¡å· ğŸŒŸ = æœ€å¼ºä¹°å–ç‚¹

### 3. èƒŒç¦»æ£€æµ‹ Divergence Detection
- è‡ªåŠ¨é€‚åº”æ³¢åŠ¨ç‡ (Low Vol / Normal / High Vol / Crypto)
- å•é”šç‚¹æ£€æµ‹ï¼Œä¿¡å·ç»˜åˆ¶åœ¨ç»“æ„è½¬æŠ˜ç‚¹
- æç«¯åŒºèƒŒç¦» ğŸ’ vs æ™®é€šèƒŒç¦» â†—ï¸â†˜ï¸

### 4. è¶‹åŠ¿ä¿æŠ¤ Trend Protection
- å‘¨çº¿è¶‹åŠ¿è¿‡æ»¤ï¼Œé¿å…é€†åŠ¿äº¤æ˜“
- ä¸‰æ¡£ä¿æŠ¤çº§åˆ«: Aggressive / Moderate / Loose
- é˜²æ­¢åœ¨å‘¨çº¿æç«¯ä¸‹è·Œä¸­æŠ„åº•

### 5. ä¿¡å·ç»Ÿè®¡ Signal Statistics
- å®æ—¶ç»Ÿè®¡æ¯ç±»ä¿¡å·çš„èƒœç‡å’Œæ”¶ç›Š
- è´å¶æ–¯è°ƒæ•´å°æ ·æœ¬åå·®
- ç»Ÿè®¡è¿‡æ»¤å™¨: åŸºäºå†å²è¡¨ç°è¿‡æ»¤ä½è´¨é‡ä¿¡å·

### 6. æ™ºèƒ½è­¦æŠ¥ Smart Alert
- ä¸€æ¡è­¦æŠ¥èšåˆæ‰€æœ‰ä¿¡å·
- åŒ…å«å®Œæ•´ä¸Šä¸‹æ–‡: RSIå€¼ã€Z-Scoreã€è´¨é‡ç­‰çº§
- å¯é€‰ATRé£é™©æç¤º (æ­¢æŸ/æ­¢ç›ˆå»ºè®®)

---

## ä»ªè¡¨ç›˜ / Dashboard

### Full æ¨¡å¼ (PC)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ADAPTIVE RSI            35.2  â”‚  RSIå€¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Z-Score     -2.15Ïƒ (â‰ˆP2)        â”‚  Z-Score + è¿‘ä¼¼ç™¾åˆ†ä½
â”‚ Percentile  P5 (Ïƒ:-1.8~-2.2)    â”‚  å†å²ç™¾åˆ†ä½
â”‚ Signal      ğŸ”¥[A]âœ“              â”‚  ä¿¡å· + è¯„çº§ + è¿‡æ»¤æ ‡è®°
â”‚ Status      ğŸŸ¢ EXTREME OVERSOLD â”‚  çº¯çŠ¶æ€ï¼ˆæ— è¯„çº§ï¼‰
â”‚ Protection  âœ“  W.RSI:45 ğŸ“Šâ†‘     â”‚  å‘¨çº¿ä¿æŠ¤ + æˆäº¤é‡
â”‚ Lookback    456 âœ…âœ…âœ…           â”‚  å›çœ‹æœŸ + å¥åº·åº¦
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MTF 1h|4h|D   ğŸŸ¢|âšª|ğŸŸ¢           â”‚  å¤šå‘¨æœŸçŠ¶æ€
â”‚ Resonance    ğŸŸ¢ 4/4              â”‚  å…±æŒ¯å¾—åˆ†
â”‚ Divergence   ğŸŸ¢ BULL             â”‚  èƒŒç¦»çŠ¶æ€
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒŸ[A]ğŸ“ˆ(12)âœ“  +4.5%|85%         â”‚  ç»Ÿè®¡æ’è¡Œæ¦œ
â”‚ ğŸ’[A]ğŸ“ˆ(8)âš ï¸  +4.2%|82%         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile æ¨¡å¼ (æ‰‹æœº)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RSI      35.2  â”‚
â”‚  Signal   ğŸ”¥[A]âœ“â”‚  ä¿¡å·+è¯„çº§+æ ‡è®°
â”‚  Status   ğŸŸ¢æå– â”‚  çº¯çŠ¶æ€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¿«é€Ÿå¼€å§‹ / Quick Start

### 1. æ·»åŠ æŒ‡æ ‡
1. TradingView â†’ Pine Editor
2. ç²˜è´´ `adaptive_rsi.pine` ä»£ç 
3. ç‚¹å‡» "Add to chart"

### 2. è®¾ç½®è­¦æŠ¥
1. å³é”®æŒ‡æ ‡ â†’ "Add Alert"
2. æ¡ä»¶é€‰æ‹© **"Any alert() function call"**
3. å®Œæˆï¼

### 3. æ¨èè®¾ç½®

| åœºæ™¯ | Dashboard | æ™®é€šä¿¡å· | ä¿æŠ¤çº§åˆ« |
|------|-----------|----------|----------|
| æ—¥å†…äº¤æ˜“ | Full | Smart | Moderate |
| æ³¢æ®µäº¤æ˜“ | Full | Off | Moderate |
| æ‰‹æœºæŸ¥çœ‹ | Mobile | Off | Loose |

---

## è­¦æŠ¥æ¶ˆæ¯ç¤ºä¾‹ / Alert Examples

```
AAPL: ğŸŸ¢ BUY â†’ ğŸŒŸMTFå…±æŒ¯ | RSI:25.3 Z:-2.1Ïƒ (â‰ˆP2) [A]âœ“
AAPL: ğŸ”´ SELL â†’ â„ï¸æç«¯ | RSI:78.5 Z:2.3Ïƒ (â‰ˆP98) [B]âš ï¸
```

å¼€å¯é£é™©æç¤ºå:
```
AAPL: ğŸŸ¢ BUY â†’ ğŸ”¥æç«¯ | RSI:25.3 Z:-2.1Ïƒ (â‰ˆP2) [A]âœ“ | SL:-1.5% TP:+3.0%
```

> **æ ‡è®°è¯´æ˜**: âœ“ = é€šè¿‡ç»Ÿè®¡è¿‡æ»¤ | âš ï¸ = æœªé€šè¿‡ç»Ÿè®¡è¿‡æ»¤ | æ— æ ‡è®° = ç»Ÿè®¡è¿‡æ»¤æœªå¯ç”¨

---

## ç‰ˆæœ¬å†å² / Changelog

### v7.1 (Current) - Percentile Confirm / ç™¾åˆ†ä½ç¡®è®¤
- **New / æ–°åŠŸèƒ½**: å¯é€‰çš„ç™¾åˆ†ä½åŒé‡ç¡®è®¤æ¨¡å¼ (Trend Protection ç»„)
- **Improvement / æ”¹è¿›**: æç«¯ä¿¡å·éœ€åŒæ—¶æ»¡è¶³ Z-Score(-2Ïƒ) å’Œ Percentile(P5/P95)
- **Benefit / ä¼˜åŠ¿**: å‡å°‘æ³¢åŠ¨ç‡å˜åŒ–æ—¶çš„å‡ä¿¡å·ï¼Œæå‡èƒœç‡
- **Note / è¯´æ˜**: é»˜è®¤å…³é—­ï¼Œé€‚ç”¨äºæ³¢åŠ¨ç‡å˜åŒ–è¾ƒå¤§çš„å¸‚åœº

### v7.0 - Dashboard é‡æ„ / Dashboard Refactor
- **ç§»é™¤ Lite æ¨¡å¼** - ä»…ä¿ç•™ Mobile å’Œ Full ä¸¤ç§æ¨¡å¼
- **Signal/Status èŒè´£åˆ†ç¦»** - Signal è¡Œæ˜¾ç¤ºä¿¡å·+è¯„çº§+æ ‡è®°ï¼ŒStatus è¡Œåªæ˜¾ç¤ºçº¯åŒºåŸŸçŠ¶æ€
- **ç»Ÿä¸€åŠ¨æ€é˜ˆå€¼** - Status çŠ¶æ€ä½¿ç”¨åŠ¨æ€ `normal_threshold` è€Œéå›ºå®š Â±1.5Ïƒ
- **ä¿®å¤è¡¨æ ¼æ®‹ç•™** - åˆ‡æ¢æ¨¡å¼æ—¶è‡ªåŠ¨æ¸…é™¤æ—§è¡Œå†…å®¹
- **Alert é‡æ„** - ä½¿ç”¨ switch è¯­å¥ç®€åŒ–å›¾æ ‡é€‰æ‹©ï¼Œè¿‡æ»¤æ ‡è®°ä»…åœ¨å¯ç”¨æ—¶æ˜¾ç¤º
- **ä»£ç ä¼˜åŒ–** - åˆ é™¤å†—ä½™å˜é‡ï¼Œç»Ÿä¸€ä¿¡å·æ˜¾ç¤ºé€»è¾‘

### v6.9
- ADXè¶‹åŠ¿æƒ©ç½š (ADX>25æ—¶é€†åŠ¿ä¿¡å·-10åˆ†ï¼Œé¿å…å¼ºè¶‹åŠ¿ä¸­é€†åŠ¿äº¤æ˜“)
- RSIæ‹ç‚¹ç¡®è®¤åŠ åˆ† (æç«¯åŒºå½¢æˆRSIæ‹ç‚¹+10åˆ†ï¼Œæå‡åè½¬ä¿¡å·å¯ä¿¡åº¦)

### v6.8
- ç»Ÿè®¡é©±åŠ¨è¿‡æ»¤å™¨ (åŸºäºå†å²èƒœç‡è¿‡æ»¤ä¿¡å·)
- èƒŒç¦»æ£€æµ‹é‡æ„ (å•é”šç‚¹ + offsetç»˜åˆ¶)
- MTFåŠ æƒå…±æŒ¯ (é«˜å‘¨æœŸæƒé‡Ã—2)
- ATRé£é™©æç¤º (å¯é€‰æ­¢æŸæ­¢ç›ˆ)
- Bugä¿®å¤: æˆäº¤é‡å¼€å…³ã€å‘¨æœˆçº¿è®¡ç®—

### v6.7
- æ™ºèƒ½å›çœ‹æœŸ (åŸºäºæ³¢åŠ¨ç‡åŠ¨æ€èŒƒå›´)
- åˆ†å¸ƒå®½åº¦åé¦ˆç¯
- åŒå±‚èƒŒæ™¯æ˜¾ç¤º

### v6.6
- æ™ºèƒ½æ™®é€šä¿¡å·æ¨¡å¼ (Off/On/Smart)
- è‡ªåŠ¨é˜ˆå€¼ (åŸºäºæ³¢åŠ¨ç‡)

### v6.5
- é‡æ„è¯„åˆ†ç³»ç»Ÿ (Base + Bonuses - Penalties)
- æ™ºèƒ½å†·å´æœŸ (åŒé‡æ³¢åŠ¨ç‡æ£€æµ‹)
- æ’è¡Œæ¦œç»Ÿè®¡æ¨¡å¼

---

## ä»£ç è´¨é‡ / Code Quality

æœ¬é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰çš„ **Pine Script é™æ€åˆ†æå™¨** è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ã€‚

This project uses a custom **Pine Script Static Analyzer** for code quality checks.

### GitHub CI

æ¯æ¬¡æ¨é€ `.pine` æ–‡ä»¶æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨è¿è¡Œ lint æ£€æŸ¥ã€‚

Lint checks run automatically via GitHub Actions on every push to `.pine` files.

[![Pine Script Lint](https://github.com/aaajiao/Adaptive-RSI-Pro/actions/workflows/pine-lint.yml/badge.svg)](https://github.com/aaajiao/Adaptive-RSI-Pro/actions/workflows/pine-lint.yml)

### æœ¬åœ°æ£€æŸ¥ / Local Check

```bash
python tools/pine_linter/cli.py adaptive_rsi.pine
python tools/pine_linter/cli.py --format markdown adaptive_rsi.pine
```

### æ£€æŸ¥è§„åˆ™ / Lint Rules

| è§„åˆ™ Rule | ä¸¥é‡æ€§ Severity | æè¿° Description |
|-----------|----------------|------------------|
| SEC001 | error | `request.security()` éœ€è¦ `lookahead=barmerge.lookahead_off` |
| SEC002 | warning | `request.security()` åœ¨æ¡ä»¶è¯­å¥å†…å¯èƒ½å¯¼è‡´é‡ç»˜ |
| SYN001 | warning | å¤šè¡Œä¸‰å…ƒè¡¨è¾¾å¼ (v6 è¯­æ³•é™·é˜±) |
| NAM001-003 | info | å‘½åè§„èŒƒæ£€æŸ¥ (å¸¸é‡/å‡½æ•°/ç±»å‹) |
| QUA001 | info | Tooltip åº”åŒ…å«åŒè¯­æ–‡æœ¬ |
| QUA002 | warning | `request.security()` ç»“æœåº”æ£€æŸ¥ na |

é…ç½®æ–‡ä»¶: `.pine-lint.yml`

---

## License

MIT License - Feel free to use, modify, and share.
